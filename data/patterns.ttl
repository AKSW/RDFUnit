@prefix rutp: <http://rdfunit.aksw.org/data/patterns#> .
@prefix ruto: <http://rdfunit.aksw.org/ns/core#> .
@prefix rutg: <http://rdfunit.aksw.org/data/generators#> .

@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .


##########################################
#### rdfs:range pattern
##########################################

rutp:RDFSRANGE a ruto:Pattern ;
    dcterms:identifier "RDFSRANGE" ;
    dcterms:description """Emulates the rdfs:range constrain."""@en ;
    ruto:sparqlWherePattern """ {
                                    ?s %%P1%% ?resource.
                                    FILTER NOT EXISTS {
                                        ?resource rdf:type ?T1 .
                                        ?T1 rdfs:subClassOf+ %%T1%% . }
                                    FILTER NOT EXISTS {
                                        ?resource rdf:type %%T1%%  }
									BIND ( %%MESSAGE%% AS ?message) 
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?s %%P1%% ?resource .} """ ;
    ruto:parameter rutp:RDFSRANGE-P1 ;
    ruto:parameter rutp:RDFSRANGE-T1 ;
    ruto:parameter rutp:RDFSRANGE-MESSAGE ;
#    ruto:resultAnnotation [
#        a ruto:ResultAnnotation ;
#        ruto:annotationProperty <http://xxxx> ;
#        ruto:annotationValue <http://YYYY>
#    ];
    .


rutp:RDFSRANGE-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:RDFSRANGE-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:RDFSRANGE-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


##########################################
#### rdfs:range (datatype) pattern
##########################################

rutp:RDFSRANGED a ruto:Pattern ;
    dcterms:identifier "RDFSRANGED" ;
    dcterms:description """Emulates the rdfs:range (datatype) constrain."""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?c.
                                    FILTER (DATATYPE(?c) != %%D1%%)
									BIND ( %%MESSAGE%% AS ?message) 
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource %%P1%% ?c .} """ ;
    ruto:parameter rutp:RDFSRANGED-P1 ;
    ruto:parameter rutp:RDFSRANGED-D1 ;
    ruto:parameter rutp:RDFSRANGED-MESSAGE .


rutp:RDFSRANGED-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:RDFSRANGED-D1 a ruto:Parameter ;
    dcterms:identifier "D1" ;
    ruto:parameterConstraint ruto:None .

rutp:RDFSRANGED-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


##########################################
#### rdfs:domain pattern
##########################################

rutp:RDFSDOMAIN a ruto:Pattern ;
    dcterms:identifier "RDFSDOMAIN" ;
    dcterms:description """Emulates the rdfs:domain constrain. It can be extended by using specific values in V1"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% %%V1%%
                                    FILTER NOT EXISTS {
                                        ?resource rdf:type ?T1 .
                                        ?T1 rdfs:subClassOf+ %%T1%% . }
                                    FILTER NOT EXISTS {
                                        ?resource rdf:type %%T1%%  }
									BIND ( %%MESSAGE%% AS ?message) 
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource %%P1%% ?c .} """ ;
    ruto:parameter rutp:RDFSDOMAIN-P1 ;
    ruto:parameter rutp:RDFSDOMAIN-V1 ;
    ruto:parameter rutp:RDFSDOMAIN-T1 ;
    ruto:parameter rutp:RDFSDOMAIN-MESSAGE .

rutp:RDFSDOMAIN-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:RDFSDOMAIN-V1 a ruto:Parameter ;
    dcterms:identifier "V1" .

rutp:RDFSDOMAIN-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:RDFSDOMAIN-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


##########################################
#### owl:disjointClass pattern  (#TODO fix transitive)
##########################################

rutp:OWLDISJC a ruto:Pattern ;
    dcterms:identifier "OWLDISJC" ;
    dcterms:description """Emulates the owl:disjointClass constrain"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource rdf:type %%T1%% .
                                    ?resource rdf:type %%T2%% .
									BIND ( %%MESSAGE%% AS ?message) 
                                } """ ;
    ruto:sparqlPrevalencePattern """  """ ;
    ruto:parameter rutp:OWLDISJC-T1 ;
    ruto:parameter rutp:OWLDISJC-T2 ;
    ruto:parameter rutp:OWLDISJC-MESSAGE .

rutp:OWLDISJC-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:OWLDISJC-T2 a ruto:Parameter ;
    dcterms:identifier "T2" ;
    ruto:parameterConstraint ruto:Class .

rutp:OWLDISJC-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


##########################################
#### owl:propertyDisjointWith pattern
##########################################

rutp:OWLDISJP a ruto:Pattern ;
    dcterms:identifier "OWLDISJP" ;
    dcterms:description """Emulates the owl:disjointProperty constrain"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?v .
                                    ?resource %%P2%% ?v .
									BIND ( %%MESSAGE%% AS ?message) 
                                } """ ;
    ruto:sparqlPrevalencePattern """  """ ;
    ruto:parameter rutp:OWLDISJP-P1 ;
    ruto:parameter rutp:OWLDISJP-P2 ;
    ruto:parameter rutp:OWLDISJP-MESSAGE .

rutp:OWLDISJP-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLDISJP-P2 a ruto:Parameter ;
    dcterms:identifier "P2" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLDISJP-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


##########################################
#### owl cardinality constrains pattern
##########################################

rutp:OWLCARD a ruto:Pattern ;
    dcterms:identifier "OWLCARD" ;
    dcterms:description """Emulates the owl:cardinality constrain without a Class constraint"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?c.
									BIND ( %%MESSAGE%% AS ?message) 
                                } GROUP BY ?resource ?message
                                HAVING ( count(?c)  %%OP%% %%V1%% ) """ ;
    ruto:sparqlPrevalencePattern """ SELECT  (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource %%P1%% ?c. }""" ;
    ruto:parameter rutp:OWLCARD-P1 ;
    ruto:parameter rutp:OWLCARD-OP ;
    ruto:parameter rutp:OWLCARD-V1 ;
    ruto:parameter rutp:OWLCARD-MESSAGE .

rutp:OWLCARD-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLCARD-OP a ruto:Parameter ;
    dcterms:identifier "OP" ;
    ruto:parameterConstraint ruto:Operator ;
    ruto:constraintPattern """<|<=|>|>=|=|!=""" .

rutp:OWLCARD-V1 a ruto:Parameter ;
    dcterms:identifier "V1" ;
    ruto:parameterConstraint ruto:None ;
    ruto:constraintPattern """[0-9]*""" .

rutp:OWLCARD-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


##########################################
#### owl cardinality constrains pattern on Class
##########################################

rutp:OWLCARDT a ruto:Pattern ;
    dcterms:identifier "OWLCARDT" ;
    dcterms:description """Emulates the owl:cardinality constrain on a Class"""@en ;
    ruto:sparqlWherePattern """ {
									{
                                    	?resource rdf:type %%T1%%.
                                    	?resource %%P1%% ?c.
									} UNION {
										?resource rdf:type ?t1.
										?t1 rdfs:subClassOf+ %%T1%%.
                                    	?resource %%P1%% ?c.
									}
									BIND ( %%MESSAGE%% AS ?message) 
                                } GROUP BY ?resource ?message
                                HAVING ( count(?c)  %%OP%% %%V1%% ) """ ;
    ruto:sparqlPrevalencePattern """ SELECT  (count( DISTINCT ?resource) AS ?total) WHERE { {
                                    	?resource rdf:type %%T1%%.
                                    	?resource %%P1%% ?c.
									} UNION {
										?resource rdf:type ?t1.
										?t1 rdfs:subClassOf+ %%T1%%.
                                    	?resource %%P1%% ?c.
									} }""" ;
    ruto:parameter rutp:OWLCARDT-T1 ;
    ruto:parameter rutp:OWLCARDT-P1 ;
    ruto:parameter rutp:OWLCARDT-OP ;
    ruto:parameter rutp:OWLCARDT-V1 ;
    ruto:parameter rutp:OWLCARDT-MESSAGE .

rutp:OWLCARDT-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:OWLCARDT-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLCARDT-OP a ruto:Parameter ;
    dcterms:identifier "OP" ;
    ruto:parameterConstraint ruto:Operator ;
    ruto:constraintPattern """<|<=|>|>=|=|!=""" .

rutp:OWLCARDT-V1 a ruto:Parameter ;
    dcterms:identifier "V1" ;
    ruto:parameterConstraint ruto:None ;
    ruto:constraintPattern """[0-9]*""" .

rutp:OWLCARDT-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


##########################################
#### Type & Property dependency (equivalent to card > 0)
##########################################

rutp:TYPRODEP a ruto:Pattern ;
    dcterms:identifier "TYPRODEP" ;
    dcterms:description """ A property must or must not exist in a class instance. Use 'NOT' for existence and '' for non existence"""@en ;
    ruto:sparqlWherePattern """ {
                                    {
										?resource rdf:type %%T1%% .
                                    	FILTER %%NOT%% EXISTS {?resource %%P1%% ?v }
									} UNION {
										?resource rdf:type ?t1 . 
										?t1 rdfs:subClassOf+ %%T1%%
										FILTER %%NOT%% EXISTS {?resource %%P1%% ?v }
									}
									BIND ( %%MESSAGE%% AS ?message) 
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT  (count( DISTINCT ?resource) AS ?total)
                                     WHERE { {?resource rdf:type %%T1%% .}
									 		UNION { ?resource rdf:type ?t1 . 
											?t1 rdfs:subClassOf+ %%T1%% .} } """ ;
    ruto:parameter rutp:TYPRODEP-T1 ;
    ruto:parameter rutp:TYPRODEP-NOT ;
    ruto:parameter rutp:TYPRODEP-P1 ;
    ruto:parameter rutp:TYPRODEP-MESSAGE .

rutp:TYPRODEP-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:TYPRODEP-NOT a ruto:Parameter ;
    dcterms:identifier "NOT" ;
    ruto:parameterConstraint ruto:Operator ;
    ruto:constraintPattern """NOT|""" .

rutp:TYPRODEP-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:TYPRODEP-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .

################################################################################
#### unique value constraint of inverse functional properties
################################################################################

rutp:INVFUNC a ruto:Pattern ;
    dcterms:identifier "INVFUNC" ;
    dcterms:description """ Unique value constraint of inverse functional properties """@en ;
    ruto:sparqlWherePattern """ {
                                    ?a %%P1%% ?resource .
                                    ?b %%P1%% ?resource .
                                    FILTER (?a != ?b)
									BIND ( %%MESSAGE%% AS ?message) 
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?a %%P1%% ?resource . }""" ;
    ruto:parameter rutp:INVFUNC-P1 ;
    ruto:parameter rutp:INVFUNC-MESSAGE .

rutp:INVFUNC-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:INVFUNC-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### unique value constraint of inverse functional properties  (on a Class)
################################################################################

rutp:INVFUNCT a ruto:Pattern ;
    dcterms:identifier "INVFUNCT" ;
    dcterms:description """ Unique value constraint of inverse functional properties (constraint on a class) """@en ;
    ruto:sparqlWherePattern """ {   {
                                        ?a %%P1%% ?resource ;
                                           a %%T1%% .
                                        ?b %%P1%% ?resource ;
                                           a %%T1%% .
                                    } UNION {
                                        ?a %%P1%% ?resource ;
                                            rdfs:subClassOf+ %%T1%% .
                                        ?b %%P1%% ?resource ;
                                            rdfs:subClassOf+ %%T1%% .
                                    }
                                    FILTER (?a != ?b)
									BIND ( %%MESSAGE%% AS ?message)
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { {?a %%P1%% ?resource ; a %%T1%% }
                                       UNION {?a %%P1%% ?resource ; rdfs:subClassOf+ %%T1%% .} }""" ;
    ruto:parameter rutp:INVFUNCT-P1 ;
    ruto:parameter rutp:INVFUNCT-T1 ;
    ruto:parameter rutp:INVFUNCT-MESSAGE .

rutp:INVFUNCT-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:INVFUNCT-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:INVFUNCT-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### symmetric properties involved in only one axiom (only 'one-way'), e.g.
#### ex:bernd dbo:spouse ex:alice . is mentioned, but not
#### ex:alice dbo:spouse ex:bernd .
################################################################################

rutp:OWLSYMMETRICPROP a ruto:Pattern ;
    dcterms:identifier "OWLSYMMETRICPROP" ;
    dcterms:description """ Given the case that a certain property p is symmetric, it is assumed that for two resources x and y being related to each other via this property, both statements a p b. and b p a. exist in the dataset """@en ;
    ruto:sparqlWherePattern """ {
                                    ?r1  %%P1%% ?resource .
                                    FILTER NOT EXISTS {?resource %%P1%% ?r1} .
									BIND ( %%MESSAGE%% AS ?message) .
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?r1 %%P1%% ?resource . }""" ;
    ruto:parameter rutp:OWLSYMMETRICPROP-P1 ;
    ruto:parameter rutp:OWLSYMMETRICPROP-MESSAGE .

rutp:OWLSYMMETRICPROP-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLSYMMETRICPROP-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### a property that is asymmetric is used as symmetric property, as in
#### ex:bernd dbo:child ex:alice . and
#### ex:alice dbo:child bernd .
################################################################################

rutp:OWLASYMMETRICPROP a ruto:Pattern ;
    dcterms:identifier "OWLASYMMETRICPROP" ;
    dcterms:description """ Given a property that is asymmetric, this pattern finds cases where it is nonetheless used as symmetric property """@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?r2 .
                                    ?r2 %%P1%% ?resource .
									BIND ( %%MESSAGE%% AS ?message) .
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE {?resource %%P1%% ?r2 .}""";
    ruto:parameter rutp:OWLASYMMETRICPROP-P1 ;
    ruto:parameter rutp:OWLASYMMETRICPROP-MESSAGE .

rutp:OWLASYMMETRICPROP-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLASYMMETRICPROP-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### in a dataset a transitive property is used for statements like
#### ex:alice dbo:family ex:bernd . and
#### ex:bernd dbo:family ex:charly . 
#### but the consequent statement
#### ex:alic dbo:family ex:charly is missing
################################################################################

rutp:OWLTRANSPROP a ruto:Pattern ;
    dcterms:identifier "OWLTRANSPROP" ;
    dcterms:description """ Given a transitive property, this pattern finds missing statements containing the consequent transitive entailments """@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?r2 .
                                    ?r2 %%P1%% ?r3 .
                                    FILTER NOT EXISTS {?resource %%P1%% ?r3} .
									BIND ( %%MESSAGE%% AS ?message) .
                                }""" ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE {?resource %%P1%% ?r2 .}""" ;
    ruto:parameter rutp:OWLTRANSPROP-P1 ;
    ruto:parameter rutp:OWLTRANSPROP-MESSAGE ;
    .

rutp:OWLTRANSPROP-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLTRANSPROP-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### Given an irreflexive property p there should not be any triples like
#### ex:sth p ex:sth . 
################################################################################

rutp:OWLIRREFLEXIVE a ruto:Pattern ;
    dcterms:identifier "OWLIRREFLEXIVE" ;
    dcterms:description """ Given an irreflexive property, this pattern find violating statement that nontheless use this property reflexively """@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?resource .
									BIND ( %%MESSAGE%% AS ?message) .
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE {?resource %%P1%% ?o .}""" ;
    ruto:parameter rutp:OWLIRREFLEXIVE-P1 ;
    ruto:parameter rutp:OWLIRREFLEXIVE-MESSAGE .

rutp:OWLIRREFLEXIVE-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:OWLIRREFLEXIVE-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### COMP
#### Comparison between two literal values in a resource
################################################################################

rutp:COMP a ruto:Pattern ;
    dcterms:identifier "COMP" ;
    dcterms:description """Comparison between two literal values in a resource"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?beforeVal .
                                    ?resource %%P2%% ?afterVal .
                                    FILTER ( ?beforeVal %%OP%% ?afterVal )
									BIND ( %%MESSAGE%% AS ?message) .
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total) WHERE {
                                        ?resource %%P1%% ?beforeVal .
                                        ?resource %%P2%% ?afterVal .
                                     }""" ;
    ruto:parameter rutp:COMP-P1 ;
    ruto:parameter rutp:COMP-P2 ;
    ruto:parameter rutp:COMP-OP ;
    ruto:parameter rutp:COMP-MESSAGE .

rutp:COMP-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:COMP-P2 a ruto:Parameter ;
    dcterms:identifier "P2" ;
    ruto:parameterConstraint ruto:Property .

rutp:COMP-OP a ruto:Parameter ;
    dcterms:identifier "OP" ;
    ruto:parameterConstraint ruto:Operator ;
    ruto:constraintPattern """<|<=|>|>=|=|!=""" .

rutp:COMP-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### MATCH
#### Literal in not in a desired pattern
################################################################################

rutp:MATCH a ruto:Pattern ;
    dcterms:identifier "MATCH" ;
    dcterms:description """Literal in not in a desired pattern"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?value .
                                    FILTER (%%OP%% regex(str(?value), '%%REGEX%%')) .
									BIND ( %%MESSAGE%% AS ?message) .
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource %%P1%% ?value . }""" ;
    ruto:parameter rutp:MATCH-P1 ;
    ruto:parameter rutp:MATCH-OP ;
    ruto:parameter rutp:MATCH-REGEX ;
    ruto:parameter rutp:MATCH-MESSAGE .

rutp:MATCH-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:MATCH-OP a ruto:Parameter ;
    dcterms:identifier "OP" ;
    ruto:parameterConstraint ruto:Operator ;
    ruto:constraintPattern """!|""" .

rutp:MATCH-REGEX a ruto:Parameter ;
    dcterms:identifier "REGEX" ;
    ruto:parameterConstraint ruto:None .

rutp:MATCH-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### LITRAN
#### Literal in specific range
################################################################################

rutp:LITRAN a ruto:Pattern ;
    dcterms:identifier "LITRAN" ;
    dcterms:description """Literal in specific range"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource a      %%T1%% .
                                    ?resource %%P1%% ?value .
                                    FILTER( %%NOP%% ( ?value > %%valueMin%% &&
                                                      ?value < %%valueMax%% )) .
									BIND ( %%MESSAGE%% AS ?message) .
                                }""" ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total) WHERE {
                                        ?resource a      %%T1%% .
                                        ?resource %%P1%% ?value .
                                     }""" ;
    ruto:parameter rutp:LITRAN-T1 ;
    ruto:parameter rutp:LITRAN-P1 ;
    ruto:parameter rutp:LITRAN-NOP ;
    ruto:parameter rutp:LITRAN-valueMin ;
    ruto:parameter rutp:LITRAN-valueMax ;
    ruto:parameter rutp:LITRAN-MESSAGE .

rutp:LITRAN-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:LITRAN-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:LITRAN-NOP a ruto:Parameter ;
    dcterms:identifier "NOP" ;
    ruto:parameterConstraint ruto:Operator ;
    ruto:constraintPattern "!|" .

rutp:LITRAN-valueMin a ruto:Parameter ;
    dcterms:identifier "valueMin" ;
    ruto:parameterConstraint ruto:None ;
    ruto:constraintPattern """[0-9]*\\.[0-9]*""" .

rutp:LITRAN-valueMax a ruto:Parameter ;
    dcterms:identifier "valueMax" ;
    ruto:parameterConstraint ruto:None ;
    ruto:constraintPattern """[0-9]*\\.[0-9]*""" .

rutp:LITRAN-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .



################################################################################
#### TYPDEP
#### Resource is of type A and not of type B
################################################################################

rutp:TYPDEP a ruto:Pattern ;
    dcterms:identifier "TYPDEP" ;
    dcterms:description """Resource is of type A and not of type B"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource rdf:type %%T1%% .
                                    FILTER NOT EXISTS {?resource rdf:type %%T2%%}
									BIND ( %%MESSAGE%% AS ?message) .
                                } """ ;
      
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource rdf:type %%T1%% . }""" ;
    ruto:parameter rutp:TYPDEP-T1 ;
    ruto:parameter rutp:TYPDEP-T2 ;
    ruto:parameter rutp:TYPDEP-MESSAGE .

rutp:TYPDEP-T1 a ruto:Parameter ;
    dcterms:identifier "T1" ;
    ruto:parameterConstraint ruto:Class .

rutp:TYPDEP-T2 a ruto:Parameter ;
    dcterms:identifier "T2" ;
    ruto:parameterConstraint ruto:Class .

rutp:TYPDEP-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### PVT
#### Resources with a propertyA having valueA should contain a triple with
#### propertyB
################################################################################

rutp:PVT a ruto:Pattern ;
    dcterms:identifier "PVT" ;
    dcterms:description """Resources with a propertyA having valueA should contain a triple with propertyB"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% %%V1%%
                                    FILTER NOT EXISTS {?resource %%P2%% ?p}
									BIND ( %%MESSAGE%% AS ?message) .
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource %%P1%% %%V1%% }""" ;
    ruto:parameter rutp:PVT-P1 ;
    ruto:parameter rutp:PVT-V1 ;
    ruto:parameter rutp:PVT-P2 ;
    ruto:parameter rutp:PVT-MESSAGE .

rutp:PVT-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:PVT-V1 a ruto:Parameter ;
    dcterms:identifier "V1" ;
    ruto:parameterConstraint ruto:None .

rutp:PVT-P2 a ruto:Parameter ;
    dcterms:identifier "P2" ;
    ruto:parameterConstraint ruto:Property .

rutp:PVT-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### TRIPLE
#### Resource has ValueA for PropertyB
################################################################################

rutp:TRIPLE a ruto:Pattern ;
    dcterms:identifier "TRIPLE" ;
    dcterms:description """Resource has ValueA for PropertyB"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% %%V1%% .
									BIND ( %%MESSAGE%% AS ?message) . 
                                } """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource %%P1%% ?value . }""" ;
    ruto:parameter rutp:TRIPLE-P1 ;
    ruto:parameter rutp:TRIPLE-V1 ;
    ruto:parameter rutp:TRIPLE-MESSAGE .

rutp:TRIPLE-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:TRIPLE-V1 a ruto:Parameter ;
    dcterms:identifier "V1" ;
    ruto:parameterConstraint ruto:None .

rutp:TRIPLE-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .


################################################################################
#### ONELANG
#### Resource has more than one plain literal of a certain language assigned
#### (e.g. more than one foaf:name in english)
################################################################################

rutp:ONELANG a ruto:Pattern ;
    dcterms:identifier "ONELANG" ;
    dcterms:description """Resource has more than one plain literal of a certain language assigned"""@en ;
    ruto:sparqlWherePattern """ {
                                    ?resource %%P1%% ?c .
                                    BIND ( lang(?c) AS ?l ) .
                                    FILTER (isLiteral (?c) && lang(?c) = '%%V1%%') .
									BIND ( %%MESSAGE%% AS ?message) .
                                } GROUP BY ?resource ?message
                                HAVING ( COUNT (?l) > 1 ) """ ;
    ruto:sparqlPrevalencePattern """ SELECT (count( DISTINCT ?resource) AS ?total)
                                     WHERE { ?resource %%P1%% ?c .}""" ;
    ruto:parameter rutp:ONELANG-P1 ;
    ruto:parameter rutp:ONELANG-V1 ;
    ruto:parameter rutp:ONELANG-MESSAGE .

rutp:ONELANG-P1 a ruto:Parameter ;
    dcterms:identifier "P1" ;
    ruto:parameterConstraint ruto:Property .

rutp:ONELANG-V1 a ruto:Parameter ;
    dcterms:identifier "V1" ;
    ruto:parameterConstraint ruto:None .

rutp:ONELANG-MESSAGE a ruto:Parameter ;
    dcterms:identifier "MESSAGE" ;
    ruto:parameterConstraint ruto:None .

